<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug √Åreas de Risco - Connection-4</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <style>
        .debug-map {
            position: relative;
            width: 100%;
            height: 600px;
            background: #f8f9fa;
            border: 2px solid #007bff;
            overflow: hidden;
        }
        
        .rectangular-area {
            position: absolute;
            border: 3px solid;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
            color: white;
            text-align: center;
        }
        
        .circular-zone {
            position: absolute;
            border: 3px dashed #dc3545;
            border-radius: 50%;
            background: rgba(220, 53, 69, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: #dc3545;
            text-align: center;
        }
        
        .sensor-marker {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #6f42c1;
            border: 3px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 10px;
            z-index: 10;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .coord-label {
            position: absolute;
            font-size: 8px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 1px 3px;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-3">
        <h1>üîç Debug: √Åreas Retangulares vs Zonas Circulares</h1>
        
        <div class="alert alert-info">
            <h5>üèóÔ∏è Novo Layout Profissional do Canteiro:</h5>
            <ul class="mb-0">
                <li><strong>19 √Åreas Organizadas</strong>: Layout em 4 fileiras com √°reas espec√≠ficas</li>
                <li><strong>√Åreas de Risco</strong>: Guindastes e Soldas com sensores posicionados estrategicamente</li>
                <li><strong>Simula√ß√£o Inteligente</strong>: Colaboradores se movem realisticamente entre as √°reas</li>
                <li><strong>Fluxo Natural</strong>: Colaboradores preferem √°reas produtivas e seguem rotas l√≥gicas</li>
            </ul>
        </div>
        
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Visualiza√ß√£o Comparativa - √Åreas vs Zonas</h5>
                    </div>
                    <div class="card-body">
                        <div class="debug-map" id="debug-map">
                            <!-- Conte√∫do ser√° inserido via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-3">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h6>√Åreas Retangulares (AreasModel)</h6>
                    </div>
                    <div class="card-body" id="rectangular-info">
                        <!-- Lista de √°reas retangulares -->
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-danger text-white">
                        <h6>Zonas Circulares (MapModel)</h6>
                    </div>
                    <div class="card-body" id="circular-info">
                        <!-- Lista de zonas circulares -->
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <h6>Sensores Posicionados</h6>
                    </div>
                    <div class="card-body" id="sensors-info">
                        <!-- Lista de sensores -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/models/areasModel.js"></script>

    <script>
        function renderDebugView() {
            const mapContainer = document.getElementById('debug-map');
            const rectangularInfo = document.getElementById('rectangular-info');
            const circularInfo = document.getElementById('circular-info');
            const sensorsInfo = document.getElementById('sensors-info');
            
            // Limpar containers
            mapContainer.innerHTML = '';
            rectangularInfo.innerHTML = '';
            circularInfo.innerHTML = '';
            sensorsInfo.innerHTML = '';
            
            // Obter √°reas retangulares do AreasModel
            const rectangularAreas = AreasModel.getAreas();
            
            // Zonas circulares definidas no MapModel (coordenadas atualizadas)
            const circularZones = [
                { id: 'z1', name: '√Årea de Risco 1', x: 0.50, y: 0.11, r: 0.08 },
                { id: 'z2', name: '√Årea de Risco 2', x: 0.44, y: 0.39, r: 0.09 }
            ];
            
            // Sensores
            const sensors = [
                { id: 'SENSOR_GUINDASTES', x: 0.50, y: 0.11 },
                { id: 'SENSOR_SOLDAS', x: 0.44, y: 0.39 }
            ];
            
            // Renderizar √°reas retangulares
            rectangularAreas.forEach(area => {
                const areaEl = document.createElement('div');
                areaEl.className = 'rectangular-area';
                areaEl.style.left = (area.x * 100) + '%';
                areaEl.style.top = (area.y * 100) + '%';
                areaEl.style.width = (area.w * 100) + '%';
                areaEl.style.height = (area.h * 100) + '%';
                areaEl.style.background = area.color + '40';
                areaEl.style.borderColor = area.color;
                areaEl.innerHTML = `
                    ${area.icon}<br>
                    <small>${area.name}</small>
                `;
                mapContainer.appendChild(areaEl);
                
                // Info na lista
                const info = document.createElement('div');
                info.className = 'mb-2';
                info.innerHTML = `
                    <strong>${area.name}</strong><br>
                    <small>
                        ${area.icon} (${area.x}, ${area.y})<br>
                        Tamanho: ${area.w} x ${area.h}
                    </small>
                `;
                rectangularInfo.appendChild(info);
            });
            
            // Renderizar zonas circulares
            circularZones.forEach(zone => {
                const zoneEl = document.createElement('div');
                zoneEl.className = 'circular-zone';
                zoneEl.style.left = ((zone.x - zone.r) * 100) + '%';
                zoneEl.style.top = ((zone.y - zone.r) * 100) + '%';
                zoneEl.style.width = (zone.r * 2 * 100) + '%';
                zoneEl.style.height = (zone.r * 2 * 100) + '%';
                zoneEl.innerHTML = `<small>${zone.name}</small>`;
                mapContainer.appendChild(zoneEl);
                
                // Info na lista
                const info = document.createElement('div');
                info.className = 'mb-2';
                info.innerHTML = `
                    <strong>${zone.name}</strong><br>
                    <small>
                        Centro: (${zone.x}, ${zone.y})<br>
                        Raio: ${zone.r}
                    </small>
                `;
                circularInfo.appendChild(info);
            });
            
            // Renderizar sensores
            sensors.forEach(sensor => {
                const sensorEl = document.createElement('div');
                sensorEl.className = 'sensor-marker';
                sensorEl.style.left = (sensor.x * 100) + '%';
                sensorEl.style.top = (sensor.y * 100) + '%';
                sensorEl.style.transform = 'translate(-50%, -50%)';
                sensorEl.textContent = 'S';
                sensorEl.title = sensor.id;
                mapContainer.appendChild(sensorEl);
                
                // Info na lista
                const info = document.createElement('div');
                info.className = 'mb-2';
                info.innerHTML = `
                    <strong>${sensor.id}</strong><br>
                    <small>Posi√ß√£o: (${sensor.x}, ${sensor.y})</small>
                `;
                sensorsInfo.appendChild(info);
            });
            
            // Adicionar grade de refer√™ncia
            for (let i = 0; i <= 10; i++) {
                // Linhas verticais
                const vLine = document.createElement('div');
                vLine.style.position = 'absolute';
                vLine.style.left = (i * 10) + '%';
                vLine.style.top = '0';
                vLine.style.width = '1px';
                vLine.style.height = '100%';
                vLine.style.background = '#ddd';
                vLine.style.zIndex = '1';
                mapContainer.appendChild(vLine);
                
                // Linhas horizontais
                const hLine = document.createElement('div');
                hLine.style.position = 'absolute';
                hLine.style.left = '0';
                hLine.style.top = (i * 10) + '%';
                hLine.style.width = '100%';
                hLine.style.height = '1px';
                hLine.style.background = '#ddd';
                hLine.style.zIndex = '1';
                mapContainer.appendChild(hLine);
                
                // Labels das coordenadas
                if (i > 0) {
                    const label = document.createElement('div');
                    label.className = 'coord-label';
                    label.style.left = (i * 10) + '%';
                    label.style.top = '2px';
                    label.textContent = (i / 10).toFixed(1);
                    mapContainer.appendChild(label);
                    
                    const labelY = document.createElement('div');
                    labelY.className = 'coord-label';
                    labelY.style.left = '2px';
                    labelY.style.top = (i * 10) + '%';
                    labelY.textContent = (i / 10).toFixed(1);
                    mapContainer.appendChild(labelY);
                }
            }
        }
        
        // Renderizar ao carregar
        document.addEventListener('DOMContentLoaded', renderDebugView);
    </script>
</body>
</html>